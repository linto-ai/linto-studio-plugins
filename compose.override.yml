services:
  broker:
    ports:
      - "1883:1883"

  transcriber:
    healthcheck:
      disable: true
    environment:
      - DEVELOPMENT=true
    volumes:
      - ./Transcriber:/usr/src/app/transcriber
      - /usr/src/app/transcriber/node_modules
    command: ["npm run start-live"]

  sessionapi:
    healthcheck:
      disable: true
    environment:
      - DEVELOPMENT=true
    volumes:
      - ./Session-API:/usr/src/app/sessionapi
      - /usr/src/app/sessionapi/node_modules
    command: ["npm run start-live"]

  scheduler:
    healthcheck:
      disable: true
    environment:
      - DEVELOPMENT=true
    volumes:
      - ./Scheduler:/usr/src/app/scheduler
      - /usr/src/app/scheduler/node_modules
    command: ["npm run start-live"]

  msteams-scheduler:
    healthcheck:
      disable: true
    environment:
      - DEVELOPMENT=true
    volumes:
      - ./Microsoft-Teams-Scheduler:/usr/src/app/msteams-scheduler
      - /usr/src/app/msteams-scheduler/node_modules
    command: ["npm run start-live"]

  teamsappservice:
    healthcheck:
      disable: true
    environment:
      - DEVELOPMENT=true
      - TEAMSAPPSERVICE_HTTPS_PORT=443
      - TEAMSAPPSERVICE_CERTS_DIR=/certs
    volumes:
      - ./TeamsAppService:/usr/src/app/teamsappservice
      - /usr/src/app/teamsappservice/node_modules
      - ./certs/teamsappservice:/certs:ro
      - ../linto-studio/studio-sdk/javascript:/linto-studio/studio-sdk/javascript:ro
    # Expose port 443 for local HTTPS testing (comment out when not needed)
    ports:
      - "443:443"
    command: ["npm run start-live"]
